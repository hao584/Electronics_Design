ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"PID.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "USER/Arithmetic/PID.c"
  18              		.section	.text.pid_set,"ax",%progbits
  19              		.align	1
  20              		.global	pid_set
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	pid_set:
  26              	.LVL0:
  27              	.LFB65:
   1:USER/Arithmetic/PID.c **** // 文件创建时间：2024/12/1
   2:USER/Arithmetic/PID.c **** // 作者：李工
   3:USER/Arithmetic/PID.c **** // 公司：荣洋电子
   4:USER/Arithmetic/PID.c **** // 淘宝店铺名：荣洋电子RYDZ
   5:USER/Arithmetic/PID.c **** // 用途说明：该程序用于STM32F10x系列微控制器，实现编码电机的PID控制。
   6:USER/Arithmetic/PID.c **** 
   7:USER/Arithmetic/PID.c **** #include "pid.h"
   8:USER/Arithmetic/PID.c **** 
   9:USER/Arithmetic/PID.c **** //pid参数设置函数
  10:USER/Arithmetic/PID.c **** void pid_set(pid_t *PidSet,float p_set,float i_set,float d_set,float lim_out_set,float lim_i_outset
  11:USER/Arithmetic/PID.c **** {
  28              		.loc 1 11 1 view -0
  29              		.cfi_startproc
  30              		@ args = 8, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  12:USER/Arithmetic/PID.c ****   PidSet->p = p_set;   PidSet->i = i_set;   PidSet->d = d_set;
  33              		.loc 1 12 3 view .LVU1
  34              		.loc 1 12 13 is_stmt 0 view .LVU2
  35 0000 0160     		str	r1, [r0]	@ float
  36              		.loc 1 12 24 is_stmt 1 view .LVU3
  37              		.loc 1 12 34 is_stmt 0 view .LVU4
  38 0002 4260     		str	r2, [r0, #4]	@ float
  39              		.loc 1 12 45 is_stmt 1 view .LVU5
  40              		.loc 1 12 55 is_stmt 0 view .LVU6
  41 0004 8360     		str	r3, [r0, #8]	@ float
  13:USER/Arithmetic/PID.c **** 
  14:USER/Arithmetic/PID.c ****   PidSet->lim_out = lim_out_set;   PidSet->lim_i_out = lim_i_outset;//将设置赋值
  42              		.loc 1 14 3 is_stmt 1 view .LVU7
  43              		.loc 1 14 19 is_stmt 0 view .LVU8
  44 0006 009B     		ldr	r3, [sp]	@ float
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s 			page 2


  45              	.LVL1:
  46              		.loc 1 14 19 view .LVU9
  47 0008 0363     		str	r3, [r0, #48]	@ float
  48              		.loc 1 14 36 is_stmt 1 view .LVU10
  49              		.loc 1 14 54 is_stmt 0 view .LVU11
  50 000a 019B     		ldr	r3, [sp, #4]	@ float
  51 000c C362     		str	r3, [r0, #44]	@ float
  15:USER/Arithmetic/PID.c **** }
  52              		.loc 1 15 1 view .LVU12
  53 000e 7047     		bx	lr
  54              		.cfi_endproc
  55              	.LFE65:
  57              		.section	.text.myabs,"ax",%progbits
  58              		.align	1
  59              		.global	myabs
  60              		.syntax unified
  61              		.thumb
  62              		.thumb_func
  64              	myabs:
  65              	.LVL2:
  66              	.LFB66:
  16:USER/Arithmetic/PID.c **** 
  17:USER/Arithmetic/PID.c **** // 简单绝对值函数
  18:USER/Arithmetic/PID.c **** // 功能：计算a的绝对值
  19:USER/Arithmetic/PID.c **** // 参数：float a - 输入的整数
  20:USER/Arithmetic/PID.c **** // 返回值：float - 输入值的绝对值
  21:USER/Arithmetic/PID.c **** float myabs(float a)
  22:USER/Arithmetic/PID.c **** {       
  67              		.loc 1 22 1 is_stmt 1 view -0
  68              		.cfi_startproc
  69              		@ args = 0, pretend = 0, frame = 0
  70              		@ frame_needed = 0, uses_anonymous_args = 0
  71              		.loc 1 22 1 is_stmt 0 view .LVU14
  72 0000 10B5     		push	{r4, lr}
  73              	.LCFI0:
  74              		.cfi_def_cfa_offset 8
  75              		.cfi_offset 4, -8
  76              		.cfi_offset 14, -4
  77 0002 0446     		mov	r4, r0
  23:USER/Arithmetic/PID.c ****     float temp;
  78              		.loc 1 23 5 is_stmt 1 view .LVU15
  24:USER/Arithmetic/PID.c ****     if(a < 0)  temp = -a;  
  79              		.loc 1 24 5 view .LVU16
  80              		.loc 1 24 7 is_stmt 0 view .LVU17
  81 0004 0021     		movs	r1, #0
  82 0006 FFF7FEFF 		bl	__aeabi_fcmplt
  83              	.LVL3:
  84              		.loc 1 24 7 view .LVU18
  85 000a 08B9     		cbnz	r0, .L7
  86              	.LVL4:
  87              	.L3:
  25:USER/Arithmetic/PID.c ****     else temp = a;
  26:USER/Arithmetic/PID.c ****     return temp;
  88              		.loc 1 26 5 is_stmt 1 view .LVU19
  27:USER/Arithmetic/PID.c **** }
  89              		.loc 1 27 1 is_stmt 0 view .LVU20
  90 000c 2046     		mov	r0, r4
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s 			page 3


  91 000e 10BD     		pop	{r4, pc}
  92              	.LVL5:
  93              	.L7:
  24:USER/Arithmetic/PID.c ****     if(a < 0)  temp = -a;  
  94              		.loc 1 24 16 is_stmt 1 discriminator 1 view .LVU21
  24:USER/Arithmetic/PID.c ****     if(a < 0)  temp = -a;  
  95              		.loc 1 24 21 is_stmt 0 discriminator 1 view .LVU22
  96 0010 04F10044 		add	r4, r4, #-2147483648
  97              	.LVL6:
  24:USER/Arithmetic/PID.c ****     if(a < 0)  temp = -a;  
  98              		.loc 1 24 21 discriminator 1 view .LVU23
  99 0014 FAE7     		b	.L3
 100              		.cfi_endproc
 101              	.LFE66:
 103              		.section	.text.pid_cal,"ax",%progbits
 104              		.align	1
 105              		.global	pid_cal
 106              		.syntax unified
 107              		.thumb
 108              		.thumb_func
 110              	pid_cal:
 111              	.LVL7:
 112              	.LFB67:
  28:USER/Arithmetic/PID.c **** 
  29:USER/Arithmetic/PID.c **** 
  30:USER/Arithmetic/PID.c **** // PID控制函数
  31:USER/Arithmetic/PID.c **** // 功能：根据编码电机的速度和目标速度，计算PWM输出值以控制电机速度
  32:USER/Arithmetic/PID.c **** 
  33:USER/Arithmetic/PID.c **** float pid_cal(pid_t *PidGoal,float Now,float Set)
  34:USER/Arithmetic/PID.c **** { PidGoal->set = Set;
 113              		.loc 1 34 1 is_stmt 1 view -0
 114              		.cfi_startproc
 115              		@ args = 0, pretend = 0, frame = 0
 116              		@ frame_needed = 0, uses_anonymous_args = 0
 117              		.loc 1 34 1 is_stmt 0 view .LVU25
 118 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 119              	.LCFI1:
 120              		.cfi_def_cfa_offset 32
 121              		.cfi_offset 3, -32
 122              		.cfi_offset 4, -28
 123              		.cfi_offset 5, -24
 124              		.cfi_offset 6, -20
 125              		.cfi_offset 7, -16
 126              		.cfi_offset 8, -12
 127              		.cfi_offset 9, -8
 128              		.cfi_offset 14, -4
 129 0004 0446     		mov	r4, r0
 130 0006 1046     		mov	r0, r2
 131              	.LVL8:
 132              		.loc 1 34 3 is_stmt 1 view .LVU26
 133              		.loc 1 34 16 is_stmt 0 view .LVU27
 134 0008 E260     		str	r2, [r4, #12]	@ float
  35:USER/Arithmetic/PID.c ****   PidGoal->err_last = PidGoal->err;
 135              		.loc 1 35 3 is_stmt 1 view .LVU28
 136              		.loc 1 35 30 is_stmt 0 view .LVU29
 137 000a 2669     		ldr	r6, [r4, #16]	@ float
 138              		.loc 1 35 21 view .LVU30
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s 			page 4


 139 000c 6661     		str	r6, [r4, #20]	@ float
  36:USER/Arithmetic/PID.c ****   PidGoal->err = Set - Now;//计算误差
 140              		.loc 1 36 3 is_stmt 1 view .LVU31
 141              		.loc 1 36 22 is_stmt 0 view .LVU32
 142 000e FFF7FEFF 		bl	__aeabi_fsub
 143              	.LVL9:
 144              		.loc 1 36 22 view .LVU33
 145 0012 0546     		mov	r5, r0
 146              		.loc 1 36 16 view .LVU34
 147 0014 2061     		str	r0, [r4, #16]	@ float
  37:USER/Arithmetic/PID.c ****   PidGoal->diff=PidGoal->err-PidGoal->err_last;
 148              		.loc 1 37 3 is_stmt 1 view .LVU35
 149              		.loc 1 37 29 is_stmt 0 view .LVU36
 150 0016 3146     		mov	r1, r6
 151 0018 FFF7FEFF 		bl	__aeabi_fsub
 152              	.LVL10:
 153 001c 0746     		mov	r7, r0
 154              		.loc 1 37 16 view .LVU37
 155 001e A061     		str	r0, [r4, #24]	@ float
  38:USER/Arithmetic/PID.c ****    
  39:USER/Arithmetic/PID.c ****   PidGoal->p_out = PidGoal->p * PidGoal->err;
 156              		.loc 1 39 3 is_stmt 1 view .LVU38
 157              		.loc 1 39 31 is_stmt 0 view .LVU39
 158 0020 2168     		ldr	r1, [r4]	@ float
 159 0022 2846     		mov	r0, r5
 160 0024 FFF7FEFF 		bl	__aeabi_fmul
 161              	.LVL11:
 162 0028 0646     		mov	r6, r0
 163              		.loc 1 39 18 view .LVU40
 164 002a E061     		str	r0, [r4, #28]	@ float
  40:USER/Arithmetic/PID.c **** 	if(PidGoal->i != 0)
 165              		.loc 1 40 2 is_stmt 1 view .LVU41
 166              		.loc 1 40 12 is_stmt 0 view .LVU42
 167 002c D4F80480 		ldr	r8, [r4, #4]	@ float
 168              		.loc 1 40 4 view .LVU43
 169 0030 0021     		movs	r1, #0
 170 0032 4046     		mov	r0, r8
 171 0034 FFF7FEFF 		bl	__aeabi_fcmpeq
 172              	.LVL12:
 173 0038 50B9     		cbnz	r0, .L9
  41:USER/Arithmetic/PID.c **** 		PidGoal->i_out += PidGoal->i * PidGoal->err;
 174              		.loc 1 41 3 is_stmt 1 view .LVU44
 175              		.loc 1 41 10 is_stmt 0 view .LVU45
 176 003a D4F82090 		ldr	r9, [r4, #32]	@ float
 177              		.loc 1 41 32 view .LVU46
 178 003e 4146     		mov	r1, r8
 179 0040 2846     		mov	r0, r5
 180 0042 FFF7FEFF 		bl	__aeabi_fmul
 181              	.LVL13:
 182 0046 0146     		mov	r1, r0
 183              		.loc 1 41 18 view .LVU47
 184 0048 4846     		mov	r0, r9
 185 004a FFF7FEFF 		bl	__aeabi_fadd
 186              	.LVL14:
 187 004e 2062     		str	r0, [r4, #32]	@ float
 188              	.L9:
  42:USER/Arithmetic/PID.c ****   PidGoal->d_out = PidGoal->d *PidGoal->diff ;//pid运算
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s 			page 5


 189              		.loc 1 42 3 is_stmt 1 view .LVU48
 190              		.loc 1 42 31 is_stmt 0 view .LVU49
 191 0050 A168     		ldr	r1, [r4, #8]	@ float
 192 0052 3846     		mov	r0, r7
 193 0054 FFF7FEFF 		bl	__aeabi_fmul
 194              	.LVL15:
 195 0058 0546     		mov	r5, r0
 196              		.loc 1 42 18 view .LVU50
 197 005a 6062     		str	r0, [r4, #36]	@ float
  43:USER/Arithmetic/PID.c ****   
  44:USER/Arithmetic/PID.c ****   
  45:USER/Arithmetic/PID.c ****   if(myabs(PidGoal->i_out) > PidGoal->lim_i_out)//防止积分过大
 198              		.loc 1 45 3 is_stmt 1 view .LVU51
 199              		.loc 1 45 6 is_stmt 0 view .LVU52
 200 005c D4F82080 		ldr	r8, [r4, #32]	@ float
 201 0060 4046     		mov	r0, r8
 202 0062 FFF7FEFF 		bl	myabs
 203              	.LVL16:
 204              		.loc 1 45 37 discriminator 1 view .LVU53
 205 0066 E76A     		ldr	r7, [r4, #44]	@ float
 206              		.loc 1 45 5 discriminator 1 view .LVU54
 207 0068 3946     		mov	r1, r7
 208 006a FFF7FEFF 		bl	__aeabi_fcmpgt
 209              	.LVL17:
 210 006e 28B1     		cbz	r0, .L11
  46:USER/Arithmetic/PID.c ****   {
  47:USER/Arithmetic/PID.c ****     if(PidGoal->i_out < 0)
 211              		.loc 1 47 5 is_stmt 1 view .LVU55
 212              		.loc 1 47 7 is_stmt 0 view .LVU56
 213 0070 0021     		movs	r1, #0
 214 0072 4046     		mov	r0, r8
 215 0074 FFF7FEFF 		bl	__aeabi_fcmplt
 216              	.LVL18:
 217 0078 D0B9     		cbnz	r0, .L27
  48:USER/Arithmetic/PID.c ****       PidGoal->i_out = -PidGoal->lim_i_out;
  49:USER/Arithmetic/PID.c ****     else
  50:USER/Arithmetic/PID.c ****       PidGoal->i_out = PidGoal->lim_i_out;
 218              		.loc 1 50 7 is_stmt 1 view .LVU57
 219              		.loc 1 50 22 is_stmt 0 view .LVU58
 220 007a 2762     		str	r7, [r4, #32]	@ float
 221              	.L11:
  51:USER/Arithmetic/PID.c ****   }
  52:USER/Arithmetic/PID.c **** 	
  53:USER/Arithmetic/PID.c ****   PidGoal->total_out = PidGoal->p_out + PidGoal->i_out + PidGoal->d_out;//计算总和输出  
 222              		.loc 1 53 3 is_stmt 1 view .LVU59
 223              		.loc 1 53 39 is_stmt 0 view .LVU60
 224 007c 216A     		ldr	r1, [r4, #32]	@ float
 225 007e 3046     		mov	r0, r6
 226 0080 FFF7FEFF 		bl	__aeabi_fadd
 227              	.LVL19:
 228 0084 0146     		mov	r1, r0
 229              		.loc 1 53 56 view .LVU61
 230 0086 2846     		mov	r0, r5
 231 0088 FFF7FEFF 		bl	__aeabi_fadd
 232              	.LVL20:
 233 008c 0546     		mov	r5, r0
 234              		.loc 1 53 22 view .LVU62
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s 			page 6


 235 008e A062     		str	r0, [r4, #40]	@ float
  54:USER/Arithmetic/PID.c **** 
  55:USER/Arithmetic/PID.c **** 	if(myabs(PidGoal->total_out) > PidGoal->lim_out)//防止总和过大
 236              		.loc 1 55 2 is_stmt 1 view .LVU63
 237              		.loc 1 55 5 is_stmt 0 view .LVU64
 238 0090 FFF7FEFF 		bl	myabs
 239              	.LVL21:
 240              		.loc 1 55 40 discriminator 1 view .LVU65
 241 0094 266B     		ldr	r6, [r4, #48]	@ float
 242              		.loc 1 55 4 discriminator 1 view .LVU66
 243 0096 3146     		mov	r1, r6
 244 0098 FFF7FEFF 		bl	__aeabi_fcmpgt
 245              	.LVL22:
 246 009c 28B1     		cbz	r0, .L15
  56:USER/Arithmetic/PID.c ****   {
  57:USER/Arithmetic/PID.c ****     if(PidGoal->total_out < 0)
 247              		.loc 1 57 5 is_stmt 1 view .LVU67
 248              		.loc 1 57 7 is_stmt 0 view .LVU68
 249 009e 0021     		movs	r1, #0
 250 00a0 2846     		mov	r0, r5
 251 00a2 FFF7FEFF 		bl	__aeabi_fcmplt
 252              	.LVL23:
 253 00a6 38B9     		cbnz	r0, .L28
  58:USER/Arithmetic/PID.c ****       PidGoal->total_out = -PidGoal->lim_out;
  59:USER/Arithmetic/PID.c ****     else
  60:USER/Arithmetic/PID.c ****       PidGoal->total_out = PidGoal->lim_out;
 254              		.loc 1 60 7 is_stmt 1 view .LVU69
 255              		.loc 1 60 26 is_stmt 0 view .LVU70
 256 00a8 A662     		str	r6, [r4, #40]	@ float
 257              	.L15:
  61:USER/Arithmetic/PID.c ****   }
  62:USER/Arithmetic/PID.c **** 	
  63:USER/Arithmetic/PID.c ****   return PidGoal->total_out;
 258              		.loc 1 63 3 is_stmt 1 view .LVU71
  64:USER/Arithmetic/PID.c **** 
  65:USER/Arithmetic/PID.c **** }
 259              		.loc 1 65 1 is_stmt 0 view .LVU72
 260 00aa A06A     		ldr	r0, [r4, #40]	@ float
 261 00ac BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 262              	.LVL24:
 263              	.L27:
  48:USER/Arithmetic/PID.c ****     else
 264              		.loc 1 48 7 is_stmt 1 view .LVU73
  48:USER/Arithmetic/PID.c ****     else
 265              		.loc 1 48 24 is_stmt 0 view .LVU74
 266 00b0 07F10047 		add	r7, r7, #-2147483648
  48:USER/Arithmetic/PID.c ****     else
 267              		.loc 1 48 22 view .LVU75
 268 00b4 2762     		str	r7, [r4, #32]	@ float
 269 00b6 E1E7     		b	.L11
 270              	.L28:
  58:USER/Arithmetic/PID.c ****     else
 271              		.loc 1 58 7 is_stmt 1 view .LVU76
  58:USER/Arithmetic/PID.c ****     else
 272              		.loc 1 58 28 is_stmt 0 view .LVU77
 273 00b8 06F10046 		add	r6, r6, #-2147483648
  58:USER/Arithmetic/PID.c ****     else
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s 			page 7


 274              		.loc 1 58 26 view .LVU78
 275 00bc A662     		str	r6, [r4, #40]	@ float
 276 00be F4E7     		b	.L15
 277              		.cfi_endproc
 278              	.LFE67:
 280              		.text
 281              	.Letext0:
 282              		.file 2 "USER/Arithmetic/pid.h"
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 PID.c
C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s:19     .text.pid_set:00000000 $t
C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s:25     .text.pid_set:00000000 pid_set
C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s:58     .text.myabs:00000000 $t
C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s:64     .text.myabs:00000000 myabs
C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s:104    .text.pid_cal:00000000 $t
C:\Users\Lenovo\AppData\Local\Temp\ccdf9nDk.s:110    .text.pid_cal:00000000 pid_cal

UNDEFINED SYMBOLS
__aeabi_fcmplt
__aeabi_fsub
__aeabi_fmul
__aeabi_fcmpeq
__aeabi_fadd
__aeabi_fcmpgt
